## 章节设计

### 整体思路

1. 先讲解通信和网络相关概念和基础，扫清读者在网络学习上的概念障碍
2. 分层讲解网络协议，帮助读者理解每层的具体功能，为后面实战打下协议的理论基础
3. 针对不同宿主环境，讲解针对不同协议的具体 api 和工具链
4. 讲解日常开发中常用的网络调试工具，帮助读者掌握网络调试的基本方法
5. 讲解网络安全相关知识，帮助读者理解网络安全的基本概念和常见攻击手段
6. 讲解网络性能优化的基本方法，帮助读者理解网络性能的基本概念和常见优化手段
7. 讲解前端网络架构模式，帮助读者理解前端网络架构的基本概念和常见架构模式

### 大纲

1. [ ] 网络通信基础
   1. [ ] 通信基本概念
      - 数据通信的本质与历史
      - 信号与媒介（有线、无线通信原理）
      - 数据编码与传输基础
      - 通信模式：单工、半双工、全双工
      - 同步与异步通信
      - 电路交换与分组交换
      - 信道复用
   2. [ ] 网络系统模型
      - 分层网络架构的意义
      - OSI 七层模型详解
      - TCP/IP 四层模型与 OSI 对应关系
      - 每层的核心功能与责任边界
      - 数据封装与解封装过程
   3. [ ] 数据传输基础
      - 比特、字节、帧、包、段、数据报概念区分
      - 网络拓扑结构类型与特点
      - 单播、多播、广播通信方式
      - 数据分片与重组
      - 端到端通信原理
   4. [ ] 网络基础设施
      - 物理设备与角色（网卡、交换机、路由器）
      - 网络介质与传输速率
      - 网络地址划分（MAC 地址、IP 地址）
2. [ ] 协议
   1. [ ] 网络层协议
      1. [ ] IP 协议详解
         - IPv4/IPv6
         - IP 数据包结构与字段含义
         - 子网划分与 CIDR 表示法
      2. [ ] DHCP
      3. [ ] ARP
      4. [ ] ICMP
   2. [ ] 传输层协议
      1. [ ] UDP
      2. [ ] TCP
         - 协议基础
         - 连接建立与断开
         - 可靠传输机制
         - 流量控制与滑动窗口
         - 拥塞控制
      3. [ ] QUIC
   3. [ ] 应用层协议
      1. [ ] DNS
         - 域名结构与解析
         - DNS 记录类型与作用
         - DNS 缓存机制
         - DNS 安全扩展(DNSSEC)
         - HTTPDNS
      2. [ ] HTTP
         1. [ ] HTTP 概述章节
            - HTTP 1.0/1.1/2/3 的简述
         2. [ ] HTTP 协议格式和规范
         3. [ ] HTTP 核心能力说明
         - 内容协商
           - Content-Length
           - Content-Type
         - 断点续传
           - Range
         - CORS
           - Access-Control-Allow-Header
           - Access-Control-Allow-Origin
         - 缓存
           - Cache-Control
           - Max-Age
         - 鉴权
           - Authorization
         - 重定向
         - 升级机制
           - Upgrade
         - 代理
         - 其他
      3. [ ] WebSocket \*协议及核心规范
         - 核心流程 code 码
      4. [ ] SSE
      5. [ ] WebRTC
      6. [ ] MQTT
      7. [ ] RTMP/HLS/DASH
      8. [ ] CGI
      9. [ ] RPC
      10. [ ] GraphQL 与 REST 协议对比
3. [ ] 宿主环境篇

   1. [ ] 浏览器
      1. [ ] 浏览器网络基础
         - 浏览器网络栈架构
         - 从 URL 输入到页面显示的网络流程
         - 浏览器的网络并发限制
         - 浏览器的安全策略与网络访问限制
         - 网络资源加载优先级
      2. [ ] 网络请求 API
         - XMLHttpRequest
         - 流式数据处理
         - Fetch API
         - Beacon API
      3. [ ] 实时通信 API
         - WebSocket API 实现与最佳实践
         - EventSource API (SSE 客户端)
         - WebRTC 数据通道
         - 轮询技术与长连接模拟
      4. [ ] 跨域通信技术
         - 同源策略基础与限制
         - JSONP 技术原理与实现
         - postMessage 跨窗口通信
         - 跨域资源共享（CORS）实现
         - iframe 跨域通信技术
           - document.domain
           - location.hash
           - window.name
         - 服务端代理解决方案
         - 各方案的安全隐患与最佳实践
      5. [ ] 其他网络相关 API
         - 网络状态监测
         - 推送通知 API
      6. [ ] 浏览器离线与存储
         - Service Worker 网络控制
         - Cache Storage API
         - IndexedDB 与离线数据
         - 本地存储与网络数据同步
   2. [ ] node
      1. [ ] 事件驱动网络 I/O 模型
      2. [ ] 核心网络模块（http、net、dgram）
      3. [ ] Stream 处理与管道
      4. [ ] 实现各类服务器（HTTP、WebSocket、UDP）
      5. [ ] SSE 服务端实现
      6. [ ] 网络库实现原理
      7. [ ] 代理与隧道
      8. [ ] 相关库和工具介绍
   3. [ ] 移动端网络能力
      1. [ ] Native 网络框架
      2. [ ] WebView 网络控制与拦截
      3. [ ] 混生网络开发 RN/Flutter
      4. [ ] 小程序/快应用

4. [ ] 工具与调试篇
   1. [ ] 整体方法论
      - 网络问题分类
      - 性能指标与评估标准
      - 调试方法论
      - 问题定位流程
   2. [ ] 抓包分析
      - 抓包原理与技术
      - Wireshark 使用详解
      - Charles 代理与调试
      - Fiddler 高级功能
      - mitmproxy 编程式网络分析
   3. [ ] Chrome DevTools Network 面板详解
      - 请求详情与时间线分析
      - 性能瓶颈识别
      - 条件请求模拟
      - 请求拦截与修改
   4. [ ] 命令行网络工具
      - [ ] curl 完全指南
      - [ ] ping/traceroute 诊断
      - [ ] netstat/lsof 连接分析
      - [ ] tcpdump 高级用法
      - [ ] 性能测试工具（ab、wrk）
5. [ ] 网络安全
   1. [ ] 传输安全基础
      - 加密基本概念
      - 对称加密与非对称加密
      - 哈希与签名
      - PKI 与证书体系
      - 前端中的加密算法应用
   2. [ ] TLS/SSL 详解
      - TLS 握手过程
      - 证书验证机制
      - 密码套件选择
      - TLS 1.3 新特性
      - HTTPS 部署最佳实践
   3. [ ] Web 应用安全
      - 同源策略详解
        - 同源策略的历史与设计初衷
        - 不同上下文中的同源限制
        - 绕过同源策略的合法方式
      - CORS 完整配置
        - 简单请求与预检请求
        - CORS 头部字段详解
        - CORS 实用配置模式
        - 常见 CORS 错误及调试
      - CSP 内容安全策略
      - HSTS 与传输安全
      - 子资源完整性(SRI)
   4. [ ] 常见网络攻击与防护
      - XSS 攻击与防御
      - CSRF 攻击与防御
      - 中间人攻击防护
      - 请求劫持与保护
      - API 接口安全设计
   5. [ ] 认证与授权
      - Cookie 安全
      - 会话管理
      - Token 认证机制
      - OAuth 2.0 与 OpenID Connect
      - JWT 安全使用指南
6. [ ] 网络优化

   1. [ ] 性能指标与评估
      - 核心网络性能指标
      - 感知性能与实际性能
      - 用户体验指标(Web Vitals)
      - 性能预算
      - 性能测量工具与方法
   2. [ ] 请求优化策略
      - 请求数量优化
      - 请求体积优化
      - 请求优先级管理
      - 关键请求路径识别
      - 预加载策略（dns-prefetch、preconnect 等）
   3. [ ] 响应优化策略
      - HTTP 缓存完全指南
      - 分层缓存架构（浏览器、CDN、服务端）
      - 服务端渲染与网络性能
      - 静态资源优化
      - 图片与多媒体优化
   4. [ ] 连接优化
      - 持久连接管理
      - HTTP/2 优化实践
      - 域名分片与合并
      - CDN 选择与配置
      - Edge Computing 应用
   5. [ ] 弱网与移动优化
      - 弱网检测方法
      - 渐进式加载策略
      - 离线优先设计
      - 优雅降级与渐进增强
      - 自适应网络能力

7. [ ] 前端网络架构模式

   1. [ ] web 应用架构模式
      1. [ ] MPA 传统多页应用网络模型
         - 完整页面加载与服务端渲染流程
         - 表单提交与页面刷新机制
         - 资源加载优先级与阻塞渲染问题
         - 多页应用中的会话维持与状态传递
         - 针对传统多页应用的网络优化策略
      2. [ ] SPA 单页应用网络架构
         - SPA 网络请求生命周期
         - 路由切换的资源加载模型
         - 异步数据获取策略（声明式 vs 命令式）
         - 前端状态与后端数据同步模式
         - API 请求管理与依赖控制
         - 单页应用的网络错误处理策略
      3. [ ] 微前端通信架构
         - 共享依赖与独立加载策略
         - 微应用资源加载与网络性能优化
         - 微前端环境中的身份验证与会话共享
         - 跨应用状态同步与数据一致性
         - 微前端架构的网络监控与排障
         - 微前端应用间通信方式对比
      4. [ ] Serverless 前端架构
         - 函数计算与前端通信模式
         - API Gateway 与前端的交互
         - 前端直连数据库与授权控制
         - Serverless 环境中的实时通信实现
         - 冷启动与连接池管理
         - 前端项目中的 Serverless 函数集成
      5. [ ] 服务网格在前端的应用
         - 服务网格基本原理与前端关系
         - 前端服务发现与负载均衡
         - 网格代理与前端通信安全
         - 流量管理与前端请求控制
         - 服务网格观测性与前端调试
         - 渐进式引入服务网格的策略
   2. [ ] 前后端通信架构
      1. [ ] 前后端通信模式演进
         - 传统服务端模板渲染模式
         - AJAX 与局部刷新模式
         - RESTful API 与资源模型
         - RPC 风格前后端通信
         - 数据驱动与声明式数据获取
         - 混合通信模式与渐进式架构
      2. [ ] BFF (Backend For Frontend) 层设计
         - BFF 解决的核心问题与应用场景
         - 针对不同前端的 API 定制策略
         - GraphQL 作为 BFF 的实现方式
         - BFF 层的职责边界与设计原则
         - 聚合接口与数据转换模式
         - BFF 部署模式与性能考量
      3. [ ] API 网关模式
         - API 网关与前端的关系
         - 请求路由与服务发现
         - 认证授权统一处理
         - 限流、熔断与前端适配
         - 请求/响应转换与协议适配
         - 网关与前端开发工作流集成
      4. [ ] GraphQL 数据聚合层
         - GraphQL 与 REST 在前端应用中的对比
         - Schema 设计与前端需求对齐
         - 查询组合与数据获取优化
         - 订阅机制与实时更新
         - 错误处理与类型安全
         - 缓存策略与客户端状态管理
      5. [ ] 接口聚合与编排
         - 前端聚合 vs 后端聚合权衡
         - 串行、并行请求处理模式
         - 数据编排与转换策略
         - 依赖关系处理与错误传播
         - 聚合结果缓存与更新策略
         - 多数据源聚合与一致性保证
      6. [ ] 离线优先架构
         - 离线数据同步模型
           - 乐观更新与冲突检测
           - 增量同步与差异计算
           - 同步状态管理与指示器
           - 优先级队列与同步顺序
         - 冲突解决策略
           - 基于时间戳的解决方案
           - 基于版本的解决方案
           - 自动合并与用户干预
           - 领域特定冲突解析规则
         - 渐进式网络应用架构
           - Service Worker 请求拦截模型
           - 缓存策略与资源更新
           - 后台同步与消息队列
           - 连接恢复与请求重放机制

8. [ ] 系统实战案例

   1. [ ] 即时通讯系统(IM)

      - 架构设计与网络协议选择
        - 长连接 vs 短连接方案比较
        - WebSocket vs SSE vs 轮询技术选型
        - 消息队列与分发系统设计
      - 实时性保障机制
        - 心跳机制实现
        - 断线重连策略
        - 消息可靠性保证
      - 扩展性设计
        - 分布式节点通信
        - 负载均衡考量
      - 离线消息与历史记录处理
        - 消息持久化策略
        - 增量同步设计
      - 安全性设计
        - 端到端加密实现
        - 身份认证与会话管理

   2. [ ] 在线考试系统

      - 数据一致性保障
        - 答案实时保存机制
        - 弱网环境下的数据安全
        - 防止数据丢失的策略
      - 并发提交处理
        - 提交流量峰值处理
        - 限流与队列设计
      - 防作弊技术
        - 网络行为监测
        - 页面切换与网络活动检测
      - 实时监控与统计
        - WebSocket 实时数据推送
        - 数据聚合与展示

   3. [ ] 视频会议系统

      - 媒体传输协议选择
        - WebRTC vs HLS vs RTMP
        - P2P vs 中心化服务器架构
      - 网络质量自适应
        - 带宽检测与码率调整
        - 弱网优化策略
      - 多人会议架构
        - Mesh vs SFU vs MCU 模型对比
        - 信令服务器设计
      - 屏幕共享实现
        - 编码与传输优化
        - 延迟控制策略

   4. [ ] 网盘系统
      - 分片上传实现
        - 切片策略与并发控制
        - 断点续传机制
      - 秒传与去重技术
        - 文件指纹与快速校验
        - 分布式存储考量
      - 进度管理与状态同步
        - 实时进度报告
        - 多终端同步机制
      - 传输速度优化
        - 动态并发调整
        - CDN 加速策略

## Inbox

- [ ] ncz cors <https://humanwhocodes.com/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/>
- [ ] w3c cors <https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS>
- [ ] <https://fosterelli.co/developers-dont-understand-cors>
- [ ] cors 中 fetch 采用 no-cors 模式无法触发 simple cors 模式。
- [ ] read net 101 <https://hpbn.co/primer-on-latency-and-bandwidth/#bw-latency-fig>

## Todo

### 缓存控制

- [ ] 说明缓存的作用
- [ ] 演示私有缓存和共享缓存的区别
- [ ] 测试缓存限制的方法，验证 post 是否可以缓存
- [ ] 验证缓存失效数值过大是否存在溢出风险
- [ ] 验证多指令并存时缓存的执行策略
- [ ] 验证结合 max-age 和 s-max-age 修改缓存的效果
